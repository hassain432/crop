<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI Crop Yield Prediction System</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
  <style>
    .gradient-bg {
      background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 50%, #CDDC39 100%);
    }
    .prediction-card {
      transition: all 0.3s ease;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    .prediction-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
    }
    .input-field {
      transition: all 0.3s ease;
    }
    .input-field:focus {
      box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
    }
  </style>
</head>
<body class="bg-gray-50">

<!-- YOUR EXISTING HTML ABOVE (unchanged) -->

<!-- Only showing the updated input form snippet here -->
<!-- Add `id` to each input so we can access them in JS -->

<!-- START: Prediction Form (with IDs added) -->
<form id="predictionForm" class="space-y-6">
  <div>
    <label class="block text-sm font-medium text-gray-700 mb-2">Crop Type</label>
    <select id="cropType" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
      <option value="wheat">Wheat</option>
      <option value="corn">Corn</option>
      <option value="rice">Rice</option>
      <option value="soybean">Soybean</option>
      <option value="barley">Barley</option>
    </select>
  </div>

  <div class="grid grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Temperature (Â°C)</label>
      <input id="temperature" type="number" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg" value="25" />
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Rainfall (mm)</label>
      <input id="rainfall" type="number" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg" value="800" />
    </div>
  </div>

  <div class="grid grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Soil pH</label>
      <input id="ph" type="number" step="0.1" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg" value="6.5" />
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Nitrogen (kg/ha)</label>
      <input id="nitrogen" type="number" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg" value="120" />
    </div>
  </div>

  <div class="grid grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Phosphorus (kg/ha)</label>
      <input id="phosphorus" type="number" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg" value="60" />
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Potassium (kg/ha)</label>
      <input id="potassium" type="number" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg" value="80" />
    </div>
  </div>

  <div>
    <label class="block text-sm font-medium text-gray-700 mb-2">Sunlight Hours (daily)</label>
    <input id="sunlight" type="number" class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg" value="8" />
  </div>

  <button type="button" onclick="predictYield()" class="w-full bg-green-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-green-700 transition duration-300">
    <i class="fas fa-brain mr-2"></i>Predict Yield
  </button>
</form>
<!-- END: Prediction Form -->

<!-- ADD THIS AT THE END BEFORE </body> -->

<script>
  function predictYield() {
    const crop = document.getElementById('cropType').value;
    const temperature = parseFloat(document.getElementById('temperature').value);
    const rainfall = parseFloat(document.getElementById('rainfall').value);
    const ph = parseFloat(document.getElementById('ph').value);
    const nitrogen = parseFloat(document.getElementById('nitrogen').value);
    const phosphorus = parseFloat(document.getElementById('phosphorus').value);
    const potassium = parseFloat(document.getElementById('potassium').value);
    const sunlight = parseFloat(document.getElementById('sunlight').value);

    // Dummy formula for yield prediction (you can replace this with ML model results)
    const yieldPrediction = (
      (temperature * 0.3) +
      (rainfall * 0.05) +
      (7 - Math.abs(ph - 6.5)) * 10 +
      (nitrogen * 0.1) +
      (phosphorus * 0.08) +
      (potassium * 0.07) +
      (sunlight * 2)
    ) / 100;

    const resultContainer = document.getElementById('results');
    resultContainer.innerHTML = `
      <div class="text-green-600 mb-4">
        <i class="fas fa-seedling text-5xl"></i>
      </div>
      <h4 class="text-2xl font-bold text-gray-800 mb-2">Predicted Yield: ${yieldPrediction.toFixed(2)} tons/ha</h4>
      <p class="text-gray-600">Based on current input data for <strong>${crop.charAt(0).toUpperCase() + crop.slice(1)}</strong>.</p>
    `;
  }

  // Chart.js: Factor Importance
  window.addEventListener('DOMContentLoaded', () => {
    const ctx = document.getElementById('factorImportanceChart');
    if (ctx) {
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Temperature', 'Rainfall', 'Soil Nutrients', 'Sunlight'],
          datasets: [{
            label: 'Factor Importance (%)',
            data: [85, 78, 72, 65],
            backgroundColor: ['#4CAF50', '#8BC34A', '#CDDC39', '#FFEB3B']
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              max: 100
            }
          }
        }
      });
    }
  });
</script>

</body>
</html>
